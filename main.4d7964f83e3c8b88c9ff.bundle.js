webpackJsonp([2],{876:function(t,e,r){"use strict";var n=r(158);e.Router=n.Router,e.RouterOutletMap=n.RouterOutletMap;var o=r(104);e.RouteSegment=o.RouteSegment,e.UrlSegment=o.UrlSegment,e.Tree=o.Tree,e.UrlTree=o.UrlTree,e.RouteTree=o.RouteTree;var i=r(883);e.Routes=i.Routes;var a=r(244);e.Route=a.Route;var s=r(396);e.RouterUrlSerializer=s.RouterUrlSerializer,e.DefaultRouterUrlSerializer=s.DefaultRouterUrlSerializer;var u=r(885);e.ROUTER_PROVIDERS=u.ROUTER_PROVIDERS;var c=r(879),l=r(878);e.ROUTER_DIRECTIVES=[c.RouterOutlet,l.RouterLink]},243:function(t,e){"use strict";e.DEFAULT_OUTLET_NAME="__DEFAULT"},877:380,878:function(t,e,r){"use strict";var n=r(3),o=r(158),i=r(104),a=r(47),s=r(392),u=function(){function RouterLink(t,e){var r=this;this._routeSegment=t,this._router=e,this._commands=[],this.isActive=!1,this._subscription=s.ObservableWrapper.subscribe(e.changes,function(t){r._updateTargetUrlAndHref()})}return RouterLink.prototype.ngOnDestroy=function(){s.ObservableWrapper.dispose(this._subscription)},Object.defineProperty(RouterLink.prototype,"routerLink",{set:function(t){a.isArray(t)?this._commands=t:this._commands=[t],this._updateTargetUrlAndHref()},enumerable:!0,configurable:!0}),RouterLink.prototype.onClick=function(){return a.isString(this.target)&&"_self"!=this.target?!0:(this._router.navigate(this._commands,this._routeSegment),!1)},RouterLink.prototype._updateTargetUrlAndHref=function(){var t=this._router.createUrlTree(this._commands,this._routeSegment);a.isPresent(t)?(this.href=this._router.serializeUrl(t),this.isActive=this._router.urlTree.contains(t)):this.isActive=!1},RouterLink.decorators=[{type:n.Directive,args:[{selector:"[routerLink]"}]}],RouterLink.ctorParameters=[{type:i.RouteSegment,decorators:[{type:n.Optional}]},{type:o.Router}],RouterLink.propDecorators={target:[{type:n.Input}],href:[{type:n.HostBinding}],isActive:[{type:n.HostBinding,args:["class.router-link-active"]}],routerLink:[{type:n.Input}],onClick:[{type:n.HostListener,args:["click"]}]},RouterLink}();e.RouterLink=u},879:function(t,e,r){"use strict";var n=r(3),o=r(158),i=r(243),a=r(47),s=function(){function RouterOutlet(t,e,r){this._location=e,t.registerOutlet(a.isBlank(r)?i.DEFAULT_OUTLET_NAME:r,this)}return RouterOutlet.prototype.unload=function(){this._loaded.destroy(),this._loaded=null},Object.defineProperty(RouterOutlet.prototype,"loadedComponent",{get:function(){return a.isPresent(this._loaded)?this._loaded.instance:null},enumerable:!0,configurable:!0}),Object.defineProperty(RouterOutlet.prototype,"isLoaded",{get:function(){return a.isPresent(this._loaded)},enumerable:!0,configurable:!0}),RouterOutlet.prototype.load=function(t,e,r){this.outletMap=r;var o=n.ReflectiveInjector.fromResolvedProviders(e,this._location.parentInjector);return this._loaded=this._location.createComponent(t,this._location.length,o,[]),this._loaded},RouterOutlet.decorators=[{type:n.Directive,args:[{selector:"router-outlet"}]}],RouterOutlet.ctorParameters=[{type:o.RouterOutletMap},{type:n.ViewContainerRef},{type:void 0,decorators:[{type:n.Attribute,args:["name"]}]}],RouterOutlet}();e.RouterOutlet=s},392:[939,47,395],393:305,103:[940,47],394:[941,47,393,103],880:[942,393,394,394],47:4,395:187,881:function(t,e,r){"use strict";function hasLifecycleHook(t,e){if(n.isBlank(e))return!1;var r=e.constructor;return r instanceof n.Type?t in r.prototype:!1}var n=r(47);e.hasLifecycleHook=hasLifecycleHook},882:function(t,e,r){"use strict";function link(t,e,r,o){if(0===o.length)return r;var i=_normalizeCommands(o);if(_navigateToRoot(i))return new n.UrlTree(new n.TreeNode(r.root,[]));var s=_findStartingNode(i,r,t,e),u=i.commands.length>0?_updateMany(a.ListWrapper.clone(s.children),i.commands):[],c=_constructNewTree(n.rootNode(r),s,u);return new n.UrlTree(c)}function _navigateToRoot(t){return t.isAbsolute&&1===t.commands.length&&"/"==t.commands[0]}function _normalizeCommands(t){"";if(o.isString(t[0])&&1===t.length&&"/"==t[0])return new s(!0,0,t);for(var e=0,r=!1,n=[],i=0;i<t.length;++i){var a=t[i];if(o.isString(a))for(var u=a.split("/"),c=0;c<u.length;++c){var l=u[c];0==i?0==c&&"."==l||(0==c&&""==l?r=!0:".."==l?e++:""!=l&&n.push(l)):""!=l&&n.push(l)}else n.push(a)}return new s(r,e,n)}function _findUrlSegment(t,e,r,n){for(var o=t;0===o.urlSegments.length;)o=e.parent(o);var s=a.ListWrapper.last(o.urlSegments),u=r.pathFromRoot(s);if(u.length<=n)throw new i.BaseException("Invalid number of '../'");return u[u.length-1-n]}function _findStartingNode(t,e,r,o){if(t.isAbsolute)return n.rootNode(e);var i=_findUrlSegment(r,o,e,t.numberOfDoubleDots);return _findMatchingNode(i,n.rootNode(e))}function _findMatchingNode(t,e){if(e.value===t)return e;for(var r=0,n=e.children;r<n.length;r++){var i=n[r],a=_findMatchingNode(t,i);if(o.isPresent(a))return a}return null}function _constructNewTree(t,e,r){return t===e?new n.TreeNode(t.value,r):new n.TreeNode(t.value,t.children.map(function(t){return _constructNewTree(t,e,r)}))}function _update(t,e){var r=e.slice(1),i=0===r.length?null:r[0],a=_outlet(e),s=_segment(e);if(o.isBlank(t)&&!o.isStringMap(i)){var u=new n.UrlSegment(s,{},a),c=0===r.length?[]:[_update(null,r)];return new n.TreeNode(u,c)}if(o.isBlank(t)&&o.isStringMap(i)){var u=new n.UrlSegment(s,i,a);return _recurse(u,t,r.slice(1))}if(a!=t.value.outlet)return t;if(o.isStringMap(s)){var l=new n.UrlSegment(t.value.segment,s,t.value.outlet);return _recurse(l,t,r)}if(o.isStringMap(i)){var u=new n.UrlSegment(s,i,a);return _recurse(u,t,r.slice(1))}var u=new n.UrlSegment(s,{},a);return _recurse(u,t,r)}function _recurse(t,e,r){return 0===r.length?new n.TreeNode(t,[]):new n.TreeNode(t,_updateMany(a.ListWrapper.clone(e.children),r))}function _updateMany(t,e){var r=_outlet(e),n=t.filter(function(t){return t.value.outlet==r});if(n.length>0){var o=n[0];t[t.indexOf(o)]=_update(o,e)}else t.push(_update(null,e));return t}function _segment(t){if(!o.isString(t[0]))return t[0];var e=t[0].toString().split(":");return e.length>1?e[1]:t[0]}function _outlet(t){if(!o.isString(t[0]))return null;var e=t[0].toString().split(":");return e.length>1?e[0]:null}var n=r(104),o=r(47),i=r(880),a=r(103);e.link=link;var s=function(){function _NormalizedNavigationCommands(t,e,r){this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r}return _NormalizedNavigationCommands}()},883:function(t,e,r){"use strict";var n=r(244),o=r(877);e.Routes=o.makeDecorator(n.RoutesMetadata)},244:function(t,e,r){"use strict";var n=r(47),o=function(){function RouteMetadata(){}return Object.defineProperty(RouteMetadata.prototype,"path",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RouteMetadata.prototype,"component",{get:function(){},enumerable:!0,configurable:!0}),RouteMetadata}();e.RouteMetadata=o;var i=function(){function Route(t){var e=void 0===t?{}:t,r=e.path,n=e.component;this.path=r,this.component=n}return Route.prototype.toString=function(){return"@Route("+this.path+", "+n.stringify(this.component)+")"},Route}();e.Route=i;var a=function(){function RoutesMetadata(t){this.routes=t}return RoutesMetadata.prototype.toString=function(){return"@Routes("+this.routes+")"},RoutesMetadata}();e.RoutesMetadata=a},884:function(t,e,r){"use strict";function recognize(t,e,r){var o=new p(e,[r.root],{},n.rootNode(r).children,[]);return _constructSegment(t,o).then(function(t){return new n.RouteTree(t[0])})}function _recognize(t,e,r){var n=_readMetadata(e);if(i.isBlank(n))throw new u.BaseException("Component '"+i.stringify(e)+"' does not have route configuration");var o;try{o=_match(n,r)}catch(c){return s.PromiseWrapper.reject(c,null)}var l=_constructSegment(t,o),p=_recognizeMany(t,e,o.aux).then(_checkOutletNameUniqueness);return s.PromiseWrapper.all([l,p]).then(a.ListWrapper.flatten)}function _recognizeMany(t,e,r){var n=r.map(function(r){return _recognize(t,e,r)});return s.PromiseWrapper.all(n).then(a.ListWrapper.flatten)}function _constructSegment(t,e){return t.resolveComponent(e.component).then(function(r){var o=0===e.consumedUrlSegments.length||i.isBlank(e.consumedUrlSegments[0].outlet)?c.DEFAULT_OUTLET_NAME:e.consumedUrlSegments[0].outlet,a=new n.RouteSegment(e.consumedUrlSegments,e.parameters,o,e.component,r);return e.leftOverUrl.length>0?_recognizeMany(t,e.component,e.leftOverUrl).then(function(t){return[new n.TreeNode(a,t)]}):_recognizeLeftOvers(t,e.component).then(function(t){return[new n.TreeNode(a,t)]})})}function _recognizeLeftOvers(t,e){return t.resolveComponent(e).then(function(r){var o=_readMetadata(e);if(i.isBlank(o))return[];var a=o.routes.filter(function(t){return""==t.path||"/"==t.path});return 0===a.length?s.PromiseWrapper.resolve([]):_recognizeLeftOvers(t,a[0].component).then(function(e){return t.resolveComponent(a[0].component).then(function(t){var r=new n.RouteSegment([],{},c.DEFAULT_OUTLET_NAME,a[0].component,t);return[new n.TreeNode(r,e)]})})})}function _match(t,e){for(var r=0,n=t.routes;r<n.length;r++){var o=n[r],a=_matchWithParts(o,e);if(i.isPresent(a))return a}var s=t.routes.map(function(t){return"'"+t.path+"'"}).join(", ");throw new u.BaseException("Cannot match any routes. Current segment: '"+e.value+"'. Available routes: ["+s+"].")}function _matchWithParts(t,e){var r=t.path.startsWith("/")?t.path.substring(1):t.path;if("*"==r)return new p(t.component,[],null,[],[]);for(var n=r.split("/"),o={},s=[],u=null,c=null,l=e,h=0;h<n.length;++h){if(i.isBlank(l))return null;var f=n[h],m=h===n.length-1,v=h===n.length-2,d=f.startsWith(":");if(!d&&f!=l.value.segment)return null;m&&(c=l),v&&(u=l),d&&(o[f.substring(1)]=l.value.segment),s.push(l.value),l=a.ListWrapper.first(l.children)}var g=c.value.parameters,_=a.StringMapWrapper.merge(g,o),y=i.isPresent(u)?u.children.slice(1):[];return new p(t.component,s,_,c.children,y)}function _checkOutletNameUniqueness(t){var e={};return t.forEach(function(t){var r=e[t.value.outlet];if(i.isPresent(r)){var n=r.stringifiedUrlSegments,o=t.value.stringifiedUrlSegments;throw new u.BaseException("Two segments cannot have the same outlet name: '"+n+"' and '"+o+"'.")}e[t.value.outlet]=t.value}),t}function _readMetadata(t){var e=l.reflector.annotations(t).filter(function(t){return t instanceof o.RoutesMetadata});return a.ListWrapper.first(e)}var n=r(104),o=r(244),i=r(47),a=r(103),s=r(395),u=r(3),c=r(243),l=r(3);e.recognize=recognize;var p=function(){function _MatchResult(t,e,r,n,o){this.component=t,this.consumedUrlSegments=e,this.parameters=r,this.leftOverUrl=n,this.aux=o}return _MatchResult}()},158:function(t,e,r){"use strict";var n=r(3),o=r(47),i=r(103),a=r(392),s=r(103),u=r(3),c=r(884),l=r(882),p=r(104),h=r(881),f=r(243),m=function(){function RouterOutletMap(){this._outlets={}}return RouterOutletMap.prototype.registerOutlet=function(t,e){this._outlets[t]=e},RouterOutletMap}();e.RouterOutletMap=m;var v=function(){function Router(t,e,r,n,o,i){this._rootComponent=t,this._rootComponentType=e,this._componentResolver=r,this._urlSerializer=n,this._routerOutletMap=o,this._location=i,this._changes=new a.EventEmitter,this._prevTree=this._createInitialTree(),this._setUpLocationChangeListener(),this.navigateByUrl(this._location.path())}return Object.defineProperty(Router.prototype,"urlTree",{get:function(){return this._urlTree},enumerable:!0,configurable:!0}),Object.defineProperty(Router.prototype,"routeTree",{get:function(){return this._prevTree},enumerable:!0,configurable:!0}),Object.defineProperty(Router.prototype,"changes",{get:function(){return this._changes},enumerable:!0,configurable:!0}),Router.prototype.navigateByUrl=function(t){return this._navigate(this._urlSerializer.parse(t))},Router.prototype.navigate=function(t,e){return this._navigate(this.createUrlTree(t,e))},Router.prototype.dispose=function(){a.ObservableWrapper.dispose(this._locationSubscription)},Router.prototype.createUrlTree=function(t,e){var r=o.isPresent(e)?e:this._prevTree.root;return l.link(r,this._prevTree,this.urlTree,t)},Router.prototype.serializeUrl=function(t){return this._urlSerializer.serialize(t)},Router.prototype._createInitialTree=function(){var t=new p.RouteSegment([new p.UrlSegment("",{},null)],{},f.DEFAULT_OUTLET_NAME,this._rootComponentType,null);return new p.RouteTree(new p.TreeNode(t,[]))},Router.prototype._setUpLocationChangeListener=function(){var t=this;this._locationSubscription=this._location.subscribe(function(e){t._navigate(t._urlSerializer.parse(e.url))})},Router.prototype._navigate=function(t){var e=this;return this._urlTree=t,c.recognize(this._componentResolver,this._rootComponentType,t).then(function(t){return new d(t,e._prevTree).load(e._routerOutletMap,e._rootComponent).then(function(r){r&&(e._prevTree=t,e._location.go(e._urlSerializer.serialize(e._urlTree)),e._changes.emit(null))})})},Router}();e.Router=v;var d=function(){function _LoadSegments(t,e){this.currTree=t,this.prevTree=e,this.deactivations=[],this.performMutation=!0}return _LoadSegments.prototype.load=function(t,e){var r=this,n=o.isPresent(this.prevTree)?p.rootNode(this.prevTree):null,i=p.rootNode(this.currTree);return this.canDeactivate(i,n,t,e).then(function(o){return r.performMutation=!0,o&&r.loadChildSegments(i,n,t,[e]),o})},_LoadSegments.prototype.canDeactivate=function(t,e,r,n){var o=this;this.performMutation=!1,this.loadChildSegments(t,e,r,[n]);var i=a.PromiseWrapper.all(this.deactivations.map(function(t){return o.checkCanDeactivatePath(t)}));return i.then(function(t){return t.filter(function(t){return t}).length===t.length})},_LoadSegments.prototype.checkCanDeactivatePath=function(t){for(var e=this,r=a.PromiseWrapper.resolve(!0),n=function(t){r=r.then(function(r){return h.hasLifecycleHook("routerCanDeactivate",t)?t.routerCanDeactivate(e.prevTree,e.currTree):r})},o=0,s=i.ListWrapper.reversed(t);o<s.length;o++){var u=s[o];n(u)}return r},_LoadSegments.prototype.loadChildSegments=function(t,e,r,n){var i=this,a=o.isPresent(e)?e.children.reduce(function(t,e){return t[e.value.outlet]=e,t},{}):{};t.children.forEach(function(t){i.loadSegments(t,a[t.value.outlet],r,n),s.StringMapWrapper.delete(a,t.value.outlet)}),s.StringMapWrapper.forEach(a,function(t,e){return i.unloadOutlet(r._outlets[e],n)})},_LoadSegments.prototype.loadSegments=function(t,e,r,n){var i=t.value,a=o.isPresent(e)?e.value:null,s=this.getOutlet(r,t.value);if(p.equalSegments(i,a))this.loadChildSegments(t,e,s.outletMap,n.concat([s.loadedComponent]));else if(this.unloadOutlet(s,n),this.performMutation){var u=new m,c=this.loadNewSegment(u,i,a,s);this.loadChildSegments(t,e,u,n.concat([c]))}},_LoadSegments.prototype.loadNewSegment=function(t,e,r,o){var i=n.ReflectiveInjector.resolve([n.provide(m,{useValue:t}),n.provide(p.RouteSegment,{useValue:e})]),a=o.load(p.routeSegmentComponentFactory(e),i,t);return h.hasLifecycleHook("routerOnActivate",a.instance)&&a.instance.routerOnActivate(e,r,this.currTree,this.prevTree),a.instance},_LoadSegments.prototype.getOutlet=function(t,e){var r=t._outlets[e.outlet];if(o.isBlank(r))throw e.outlet==f.DEFAULT_OUTLET_NAME?new u.BaseException("Cannot find default outlet"):new u.BaseException("Cannot find the outlet "+e.outlet);return r},_LoadSegments.prototype.unloadOutlet=function(t,e){var r=this;o.isPresent(t)&&t.isLoaded&&(s.StringMapWrapper.forEach(t.outletMap._outlets,function(t,n){return r.unloadOutlet(t,e)}),this.performMutation?t.unload():this.deactivations.push(e.concat([t.loadedComponent])))},_LoadSegments}()},885:function(t,e,r){"use strict";var n=r(886),o=r(153),i=r(39);e.ROUTER_PROVIDERS=[n.ROUTER_PROVIDERS_COMMON,{provide:i.PlatformLocation,useClass:o.BrowserPlatformLocation}]},886:function(t,e,r){"use strict";function routerFactory(t,e,r,n,o){if(0==t.componentTypes.length)throw new u.BaseException("Bootstrap at least one component before injecting Router.");var a=new i.Router(null,t.componentTypes[0],e,r,n,o);return t.registerDisposeListener(function(){return a.dispose()}),a}var n=r(3),o=r(39),i=r(158),a=r(396),s=r(3),u=r(3);e.ROUTER_PROVIDERS_COMMON=[i.RouterOutletMap,{provide:a.RouterUrlSerializer,useClass:a.DefaultRouterUrlSerializer},{provide:o.LocationStrategy,useClass:o.PathLocationStrategy},o.Location,{provide:i.Router,useFactory:routerFactory,deps:[s.ApplicationRef,n.ComponentResolver,a.RouterUrlSerializer,i.RouterOutletMap,o.Location]}]},396:function(t,e,r){"use strict";function _serializeUrlTreeNode(t){return""+t.value+_serializeChildren(t)}function _serializeUrlTreeNodes(t){var e=t[0].value.toString(),r=t.slice(1),n=r.length>0?"("+r.map(_serializeUrlTreeNode).join("//")+")":"",o=_serializeChildren(t[0]);return""+e+n+o}function _serializeChildren(t){return t.children.length>0?"/"+_serializeUrlTreeNodes(t.children):""}function matchUrlSegment(t){var e=a.RegExpWrapper.firstMatch(c,t);return a.isPresent(e)?e[0]:""}function matchUrlQueryParamValue(t){var e=a.RegExpWrapper.firstMatch(l,t);return a.isPresent(e)?e[0]:""}var n=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},o=r(104),i=r(3),a=r(47),s=function(){function RouterUrlSerializer(){}return RouterUrlSerializer}();e.RouterUrlSerializer=s;var u=function(t){function DefaultRouterUrlSerializer(){t.apply(this,arguments)}return n(DefaultRouterUrlSerializer,t),DefaultRouterUrlSerializer.prototype.parse=function(t){var e=(new p).parse(t);return new o.UrlTree(e)},DefaultRouterUrlSerializer.prototype.serialize=function(t){return _serializeUrlTreeNode(o.rootNode(t))},DefaultRouterUrlSerializer}(s);e.DefaultRouterUrlSerializer=u;var c=a.RegExpWrapper.create("^[^\\/\\(\\)\\?;=&#]+"),l=a.RegExpWrapper.create("^[^\\(\\)\\?;&#]+"),p=function(){function _UrlParser(){}return _UrlParser.prototype.peekStartsWith=function(t){return this._remaining.startsWith(t)},_UrlParser.prototype.capture=function(t){if(!this._remaining.startsWith(t))throw new i.BaseException('Expected "'+t+'".');this._remaining=this._remaining.substring(t.length)},_UrlParser.prototype.parse=function(t){return this._remaining=t,""==t||"/"==t?new o.TreeNode(new o.UrlSegment("",{},null),[]):this.parseRoot()},_UrlParser.prototype.parseRoot=function(){var t=this.parseSegments();return new o.TreeNode(new o.UrlSegment("",{},null),t)},_UrlParser.prototype.parseSegments=function(t){if(void 0===t&&(t=null),0==this._remaining.length)return[];this.peekStartsWith("/")&&this.capture("/");var e=matchUrlSegment(this._remaining);if(this.capture(e),e.indexOf(":")>-1){var r=e.split(":");t=r[0],e=r[1]}var n={};this.peekStartsWith(";")&&(n=this.parseMatrixParams());var i=[];this.peekStartsWith("(")&&(i=this.parseAuxiliaryRoutes());var a=[];this.peekStartsWith("/")&&!this.peekStartsWith("//")&&(this.capture("/"),a=this.parseSegments());var s=new o.UrlSegment(e,n,t),u=new o.TreeNode(s,a);return[u].concat(i)},_UrlParser.prototype.parseQueryParams=function(){var t={};for(this.capture("?"),this.parseQueryParam(t);this._remaining.length>0&&this.peekStartsWith("&");)this.capture("&"),this.parseQueryParam(t);return t},_UrlParser.prototype.parseMatrixParams=function(){for(var t={};this._remaining.length>0&&this.peekStartsWith(";");)this.capture(";"),this.parseParam(t);return t},_UrlParser.prototype.parseParam=function(t){var e=matchUrlSegment(this._remaining);if(!a.isBlank(e)){this.capture(e);var r="true";if(this.peekStartsWith("=")){this.capture("=");var n=matchUrlSegment(this._remaining);a.isPresent(n)&&(r=n,this.capture(r))}t[e]=r}},_UrlParser.prototype.parseQueryParam=function(t){var e=matchUrlSegment(this._remaining);if(!a.isBlank(e)){this.capture(e);var r="true";if(this.peekStartsWith("=")){this.capture("=");var n=matchUrlQueryParamValue(this._remaining);a.isPresent(n)&&(r=n,this.capture(r))}t[e]=r}},_UrlParser.prototype.parseAuxiliaryRoutes=function(){var t=[];for(this.capture("(");!this.peekStartsWith(")")&&this._remaining.length>0;)t=t.concat(this.parseSegments("aux")),this.peekStartsWith("//")&&this.capture("//");return this.capture(")"),t},_UrlParser}()},104:function(t,e,r){"use strict";function rootNode(t){return t._root}function _findNode(t,e){if(t instanceof p&&equalSegments(t,e.value))return e;if(t===e.value)return e;for(var r=0,n=e.children;r<n.length;r++){var o=n[r],a=_findNode(t,o);if(i.isPresent(a))return a}return null}function _findPath(t,e,r){if(r.push(e),_equalValues(t,e.value))return r;for(var n=0,a=e.children;n<a.length;n++){var s=a[n],u=_findPath(t,s,o.ListWrapper.clone(r));if(i.isPresent(u))return u}return null}function _contains(t,e){if(!_equalValues(t.value,e.value))return!1;for(var r=function(e){var r=t.children.filter(function(t){return _equalValues(t.value,e.value)});return 0===r.length?{value:!1}:_contains(r[0],e)?void 0:{value:!1}},n=0,o=e.children;n<o.length;n++){var i=o[n],a=r(i);if("object"==typeof a)return a.value}return!0}function _equalValues(t,e){return t instanceof p?equalSegments(t,e):t instanceof l?equalUrlSegments(t,e):t===e}function _serializeParams(t){var e="";return o.StringMapWrapper.forEach(t,function(t,r){return e+=";"+r+"="+t}),e}function serializeRouteSegmentTree(t){return _serializeRouteSegmentTree(t._root)}function _serializeRouteSegmentTree(t){var e=t.value,r=t.children.map(function(t){return _serializeRouteSegmentTree(t)}).join(", ");return e.outlet+":"+e.stringifiedUrlSegments+"("+i.stringify(e.type)+") ["+r+"]"}function equalSegments(t,e){return i.isBlank(t)&&!i.isBlank(e)?!1:!i.isBlank(t)&&i.isBlank(e)?!1:t._type!==e._type?!1:t.outlet!=e.outlet?!1:o.StringMapWrapper.equals(t.parameters,e.parameters)}function equalUrlSegments(t,e){return i.isBlank(t)&&!i.isBlank(e)?!1:!i.isBlank(t)&&i.isBlank(e)?!1:t.segment!=e.segment?!1:t.outlet!=e.outlet?!1:(i.isBlank(t.parameters)&&console.log("a",t),i.isBlank(e.parameters)&&console.log("b",e),o.StringMapWrapper.equals(t.parameters,e.parameters))}function routeSegmentComponentFactory(t){return t._componentFactory}var n=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},o=r(103),i=r(47),a=function(){function Tree(t){this._root=t}return Object.defineProperty(Tree.prototype,"root",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),Tree.prototype.parent=function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null},Tree.prototype.children=function(t){var e=_findNode(t,this._root);return i.isPresent(e)?e.children.map(function(t){return t.value}):null},Tree.prototype.firstChild=function(t){var e=_findNode(t,this._root);return i.isPresent(e)&&e.children.length>0?e.children[0].value:null},Tree.prototype.pathFromRoot=function(t){return _findPath(t,this._root,[]).map(function(t){return t.value})},Tree.prototype.contains=function(t){return _contains(this._root,t._root)},Tree}();e.Tree=a;var s=function(t){function UrlTree(e){t.call(this,e)}return n(UrlTree,t),UrlTree}(a);e.UrlTree=s;var u=function(t){function RouteTree(e){t.call(this,e)}return n(RouteTree,t),RouteTree}(a);e.RouteTree=u,e.rootNode=rootNode;var c=function(){function TreeNode(t,e){this.value=t,this.children=e}return TreeNode}();e.TreeNode=c;var l=function(){function UrlSegment(t,e,r){this.segment=t,this.parameters=e,this.outlet=r}return UrlSegment.prototype.toString=function(){var t=i.isBlank(this.outlet)?"":this.outlet+":";return""+t+this.segment+_serializeParams(this.parameters)},UrlSegment}();e.UrlSegment=l;var p=function(){function RouteSegment(t,e,r,n,o){this.urlSegments=t,this.parameters=e,this.outlet=r,this._type=n,this._componentFactory=o}return RouteSegment.prototype.getParam=function(t){return i.isPresent(this.parameters)?this.parameters[t]:null},Object.defineProperty(RouteSegment.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(RouteSegment.prototype,"stringifiedUrlSegments",{get:function(){return this.urlSegments.map(function(t){return t.toString()}).join("/")},enumerable:!0,configurable:!0}),RouteSegment}();e.RouteSegment=p,e.serializeRouteSegmentTree=serializeRouteSegmentTree,e.equalSegments=equalSegments,e.equalUrlSegments=equalUrlSegments,e.routeSegmentComponentFactory=routeSegmentComponentFactory},118:function(t,e,r){"use strict";function __export(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}var n=r(277),o=r(174),i=r(119),a=r(175);__export(r(277)),__export(r(174)),__export(r(119)),__export(r(175)),Object.defineProperty(e,"__esModule",{value:!0}),e.default={providers:[i.ToastyConfig,a.ToastyService],directives:[n.Toasty,o.Toast]}},174:function(t,e,r){"use strict";var n=r(3),o=r(39),i=function(){function Toast(){this.closeToastEvent=new n.EventEmitter}return Toast.prototype.close=function(t){t.preventDefault(),this.closeToastEvent.next(this.toast)},__decorate([n.Input(),__metadata("design:type",Object)],Toast.prototype,"toast",void 0),__decorate([n.Output("closeToast"),__metadata("design:type",Object)],Toast.prototype,"closeToastEvent",void 0),Toast=__decorate([n.Component({selector:"ng2-toast",directives:[o.CORE_DIRECTIVES],template:'\n        <div class="toast" [ngClass]="[toast.type, toast.theme]">\n            <div *ngIf="toast.showClose" class="close-button" (click)="close($event)"></div>\n            <div *ngIf="toast.title || toast.msg" class="toast-text">\n                <span *ngIf="toast.title" class="toast-title">{{toast.title}}</span>\n                <br *ngIf="toast.title && toast.msg" />\n                <span *ngIf="toast.msg" class="toast-msg">{{toast.msg}}</span>\n            </div>\n        </div>'}),__metadata("design:paramtypes",[])],Toast)}();e.Toast=i},119:function(t,e,r){"use strict";var n=r(3),o=function(){function ToastyConfig(){this.limit=5,this.showClose=!0,this.position="bottom-right",this.timeout=5e3,this.theme="default"}return ToastyConfig=__decorate([n.Injectable(),__metadata("design:paramtypes",[])],ToastyConfig)}();e.ToastyConfig=o},277:function(t,e,r){"use strict";var n=r(3),o=r(39),i=r(7),a=r(119),s=r(175),u=r(174),c=function(){function Toasty(t,e){this.config=t,this.toastyService=e,this.toasts=[]}return Toasty.prototype.ngOnInit=function(){var t=this;if(this.toastyService.getToasts().subscribe(function(e){t.toasts.length>=t.config.limit&&t.toasts.shift(),t.toasts.push(e),e.timeout&&t._setTimeout(e)}),this.toastyService.getClear().subscribe(function(){t.clearAll()}),this.position){for(var e=!0,r=0;r<Toasty.POSITIONS.length;r++)if(Toasty.POSITIONS[r]===this.position){e=!1;break}e&&(this.position=this.config.position)}else this.position=this.config.position;this.position="toasty-position-"+this.position},Toasty.prototype.closeToast=function(t){this.clear(t.id)},Toasty.prototype.clear=function(t){var e=this;if(!t)throw new Error("Please provide id of Toast to close");this.toasts.forEach(function(r,n){r.id===t&&(r.onRemove&&i.isFunction(r.onRemove)&&r.onRemove.call(e,r),e.toasts.splice(n,1))})},Toasty.prototype.clearAll=function(){var t=this;this.toasts.forEach(function(e,r){e.onRemove&&i.isFunction(e.onRemove)&&e.onRemove.call(t,e)}),this.toasts=[]},Toasty.prototype._setTimeout=function(t){var e=this;window.setTimeout(function(){console.log("clear",t.id),e.clear(t.id)},t.timeout)},Toasty.POSITIONS=["bottom-right","bottom-left","top-right","top-left","top-center","bottom-center"],__decorate([n.Input(),__metadata("design:type",String)],Toasty.prototype,"position",void 0),Toasty=__decorate([n.Component({selector:"ng2-toasty",encapsulation:n.ViewEncapsulation.None,directives:[o.CORE_DIRECTIVES,u.Toast],template:'\n    <div id="toasty" [ngClass]="[position]">\n        <ng2-toast *ngFor="let toast of toasts" [toast]="toast" (closeToast)="closeToast(toast)"></ng2-toast>\n    </div>'}),__metadata("design:paramtypes",[a.ToastyConfig,s.ToastyService])],Toasty)}();e.Toasty=c},175:function(t,e,r){"use strict";var n=r(3),o=r(7),i=r(1),a=r(119),s=function(){function ToastyService(t){var e=this;this.config=t,this.uniqueCounter=0,this.toastsObservable=new i.Observable(function(t){e.toastsSubscriber=t}),this.clearObservable=new i.Observable(function(t){e.clearSubscriber=t})}return ToastyService.prototype.getToasts=function(){return this.toastsObservable},ToastyService.prototype.getClear=function(){return this.clearObservable},ToastyService.prototype.default=function(t){this.add(t,"default")},ToastyService.prototype.info=function(t){this.add(t,"info")},ToastyService.prototype.success=function(t){this.add(t,"success")},ToastyService.prototype.wait=function(t){this.add(t,"wait")},ToastyService.prototype.error=function(t){this.add(t,"error")},ToastyService.prototype.warning=function(t){this.add(t,"warning")},ToastyService.prototype.add=function(t,e){var r;if(r=o.isString(t)&&""!==t||o.isNumber(t)?{title:t.toString()}:t,!r||!r.title&&!r.msg)throw new Error("ng2-toasty: No toast title or message specified!");e=e||"default",this.uniqueCounter++;var n,i=this._checkConfigItem(this.config,r,"showClose");n=r.theme&&ToastyService.THEMES.indexOf(r.theme)>-1?r.theme:this.config.theme;var a={id:this.uniqueCounter,title:r.title,msg:r.msg,showClose:i,type:"toasty-type-"+e,theme:"toasty-theme-"+n,onAdd:r.onAdd&&o.isFunction(r.onAdd)?r.onAdd:null,onRemove:r.onRemove&&o.isFunction(r.onRemove)?r.onRemove:null};r.timeout?a.timeout=r.timeout||this.config.timeout:a.timeout=null;try{this.toastsSubscriber.next(a),r.onAdd&&o.isFunction(r.onAdd)&&r.onAdd.call(this,a)}catch(s){console.log(s),console.log("!!! Suggestion: Seems you forget add <ng2-toasty></ng2-toasty> into your html?")}},ToastyService.prototype.clearAll=function(){this.clearSubscriber.next()},ToastyService.prototype._checkConfigItem=function(t,e,r){return e[r]===!1?!1:e[r]?!0:t[r]},ToastyService.THEMES=["default","material","bootstrap"],ToastyService=__decorate([n.Injectable(),__metadata("design:paramtypes",[a.ToastyConfig])],ToastyService)}();e.ToastyService=s},561:function(t,e,r){"use strict";var n=r(3),o=r(82),i=r(150),a=r(176),s=r(563),u=r(562),c=r(564),l=r(118),p=function(){function AppComponent(){this.title="LXD WebUI"}return AppComponent=__decorate([n.Component({selector:"lxd-app",templateUrl:"assets/templates/app.component.html",directives:[o.ROUTER_DIRECTIVES,c.HeaderComponent,l.Toasty],providers:[i.HTTP_PROVIDERS,o.ROUTER_PROVIDERS,a.ContainerService]}),o.RouteConfig([{path:"/",name:"Home",component:s.ContainersComponent,useAsDefault:!0},{path:"/containers",name:"Containers",component:s.ContainersComponent},{path:"/container/:id",name:"ContainerDetail",component:u.ContainerDetailComponent}]),__metadata("design:paramtypes",[])],AppComponent)}();e.AppComponent=p},562:function(t,e,r){"use strict";var n=r(3),o=r(82),i=r(176),a=r(118),s=function(){function ContainerDetailComponent(t,e,r){this._containerService=t,this._routeParams=e,this.toastyService=r}return ContainerDetailComponent.prototype.ngOnInit=function(){var t=this,e=this._routeParams.get("id");this._containerService.getContainer(e).subscribe(function(e){return t.container=e},function(e){return t.toastyService.error(t.getToastyOptions(e))})},ContainerDetailComponent.prototype.stopAction=function(){var t=this;this._containerService.setState(this.container.name,"stop").subscribe(function(e){return t.waitOperation(e.id)},function(e){return t.toastyService.error(t.getToastyOptions(e))})},ContainerDetailComponent.prototype.startAction=function(){var t=this;this._containerService.setState(this.container.name,"start").subscribe(function(e){return t.waitOperation(e.id)},function(e){return t.toastyService.error(t.getToastyOptions(e))})},ContainerDetailComponent.prototype.restartAction=function(){var t=this;this._containerService.setState(this.container.name,"restart").subscribe(function(e){return t.waitOperation(e.id)},function(e){return t.toastyService.error(t.getToastyOptions(e))})},ContainerDetailComponent.prototype.waitOperation=function(t){var e=this;this._containerService.waitOperation(t).subscribe(function(t){t.status_code>=400?e.toastyService.error(e.getToastyOptions(t.err,t.status)):e.toastyService.success(e.getToastyOptions(void 0,t.status)),e.updateStatus()},function(t){return e.toastyService.error(e.getToastyOptions(t))})},ContainerDetailComponent.prototype.execAction=function(){
var t=this;this._containerService.exec(this.container.name,["bash"]).subscribe(function(e){var r=t._containerService.operationWebsocket(e.id,e.metadata.fds[0]);r.onopen=function(t){var e=new Terminal({cols:160,rows:32,useStyle:!0,screenKeys:!1,cursorBlink:!1});e.open(document.getElementById("console")),e.on("data",function(t){r.send(new Blob([t]))}),r.onmessage=function(t){if(t.data instanceof Blob){var r=new FileReader;r.addEventListener("loadend",function(){e.write(r.result)}),r.readAsBinaryString(t.data)}else e.write(t.data)},r.onclose=function(t){console.log("WebSocket closed"),e.destroy()},r.onerror=function(t){console.error(t)}}},function(e){return t.toastyService.error(t.getToastyOptions(e))})},ContainerDetailComponent.prototype.deleteAction=function(){var t=this;this._containerService.delete(this.container.name).subscribe(function(t){},function(e){return t.toastyService.error(t.getToastyOptions(e))})},ContainerDetailComponent.prototype.updateStatus=function(){var t=this;this._containerService.getContainer(this.container.name).subscribe(function(e){return t.container=e},function(e){return t.toastyService.error(t.getToastyOptions(e))})},ContainerDetailComponent.prototype.getToastyOptions=function(t,e){return void 0===t&&(t=""),void 0===e&&(e=""),{title:e,msg:t,timeout:3e3,theme:"material"}},ContainerDetailComponent=__decorate([n.Component({selector:"lxd-container-detail",templateUrl:"assets/templates/container-detail.component.html"}),__metadata("design:paramtypes",[i.ContainerService,o.RouteParams,a.ToastyService])],ContainerDetailComponent)}();e.ContainerDetailComponent=s},563:function(t,e,r){"use strict";var n=r(3),o=r(82),i=r(176),a=r(120),s=r(118),u=function(){function ContainersComponent(t,e,r,n){var o=this;this.appConfig=t,this._router=e,this._containerService=r,this.toastyService=n,this.title="LXD WebUI",t.onChangeConfig.subscribe(function(t){return o.getContainers()})}return ContainersComponent.prototype.ngOnInit=function(){this.getContainers()},ContainersComponent.prototype.onSelect=function(t){var e=["ContainerDetail",{id:t.name}];this._router.navigate(e)},ContainersComponent.prototype.getContainers=function(){var t=this;this._containerService.getContainers().subscribe(function(e){e.subscribe(function(e){return t.containers=e})},function(e){return t.toastyService.error(t.getToastyOptions(e))})},ContainersComponent.prototype.isRunning=function(t){return"Running"===t.status},ContainersComponent.prototype.isStopped=function(t){return"Stopped"===t.status},ContainersComponent.prototype.getToastyOptions=function(t,e){return void 0===t&&(t=""),void 0===e&&(e=""),{title:e,msg:t,timeout:3e3,theme:"material"}},ContainersComponent=__decorate([n.Component({selector:"lxd-containers",templateUrl:"assets/templates/containers.component.html"}),__metadata("design:paramtypes",[a.AppConfig,o.Router,i.ContainerService,s.ToastyService])],ContainersComponent)}();e.ContainersComponent=u},564:function(t,e,r){"use strict";var n=r(3),o=r(39),i=r(120),a=function(){function HeaderComponent(t){this.appConfig=t,this.isCollapsed=!0}return Object.defineProperty(HeaderComponent.prototype,"lxdServerUrl",{get:function(){return this.appConfig.lxdServerUrl},enumerable:!0,configurable:!0}),HeaderComponent.prototype.onLXDUrl=function(t){var e=t.target.value;localStorage.setItem("lxd_server_url",e),this.appConfig.lxdServerUrl=e},__decorate([n.Input(),__metadata("design:type",String)],HeaderComponent.prototype,"title",void 0),HeaderComponent=__decorate([n.Component({selector:"lxd-header",templateUrl:"assets/templates/menu.component.html",directives:[o.CORE_DIRECTIVES]}),__metadata("design:paramtypes",[i.AppConfig])],HeaderComponent)}();e.HeaderComponent=a},120:function(t,e,r){"use strict";var n=r(3),o=function(){function AppConfig(){this.onChangeConfig=new n.EventEmitter;var t=localStorage.getItem("lxd_server_url");t?this._lxdServerUrl=t:this._lxdServerUrl="https://127.0.0.1:8443"}return Object.defineProperty(AppConfig.prototype,"lxdServerUrl",{get:function(){return this._lxdServerUrl},set:function(t){this.onChangeConfig.emit("change"),this._lxdServerUrl=t},enumerable:!0,configurable:!0}),Object.defineProperty(AppConfig.prototype,"LXDServer",{get:function(){return this._lxdServerUrl.split("/")[2]},enumerable:!0,configurable:!0}),Object.defineProperty(AppConfig.prototype,"LXDProtocol",{get:function(){return this._lxdServerUrl.split("/")[0]+"//"},enumerable:!0,configurable:!0}),__decorate([n.Output(),__metadata("design:type",Object)],AppConfig.prototype,"onChangeConfig",void 0),AppConfig=__decorate([n.Injectable(),__metadata("design:paramtypes",[])],AppConfig)}();e.AppConfig=o},176:function(t,e,r){"use strict";var n=r(3),o=r(150),i=r(1),a=r(120),s=function(){function ContainerService(t,e){var r=this;this.appConfig=t,this.http=e,this._apiVersion="1.0",t.onChangeConfig.subscribe(function(t){return r.loadServerConfig()}),this.loadServerConfig()}return ContainerService.prototype.getContainers=function(){var t=this,e=[];return this.http.get(this._lxdBaseUrl+"/"+this._apiVersion+"/containers").map(function(r){return r.json().metadata.forEach(function(r){return e.push(t._getContainer(r))}),i.Observable.forkJoin(e)}).catch(this.handleError)},ContainerService.prototype.getContainer=function(t){return this._getContainer("/"+this._apiVersion+"/containers/"+t)},ContainerService.prototype.setState=function(t,e){return this.http.put(this._lxdBaseUrl+"/"+this._apiVersion+"/containers/"+t+"/state",JSON.stringify({action:e,timeout:30,force:!0,stateful:!1})).map(function(t){return t.json().metadata}).catch(this.handleError)},ContainerService.prototype.waitOperation=function(t){return this.http.get(this._lxdBaseUrl+"/"+this._apiVersion+"/operations/"+t+"/wait").map(function(t){return t.json().metadata}).catch(this.handleError)},ContainerService.prototype.exec=function(t,e){return this.http.post(this._lxdBaseUrl+"/"+this._apiVersion+"/containers/"+t+"/exec",JSON.stringify({command:e,environment:{HOME:"/root",TERM:"xterm",USER:"root"},"wait-for-websocket":!0,interactive:!0})).map(function(t){return t.json().metadata}).catch(this.handleError)},ContainerService.prototype.operationWebsocket=function(t,e){return new WebSocket(["wss://",this._lxdServer,"/",this._apiVersion,"/operations/",t,"/websocket?secret=",e].join(""))},ContainerService.prototype.delete=function(t){return this.http.delete(this._lxdBaseUrl+"/"+this._apiVersion+"/containers/"+t).catch(this.handleError)},ContainerService.prototype._getContainer=function(t){return this.http.get(this._lxdBaseUrl+t).map(function(t){return t.json().metadata}).catch(this.handleError)},ContainerService.prototype.handleError=function(t){return console.error(t),i.Observable.throw(t.json().error||"Server error")},ContainerService.prototype.loadServerConfig=function(){this._lxdServer=this.appConfig.LXDServer,this._protocole=this.appConfig.LXDProtocol,this._lxdBaseUrl=this._protocole+this._lxdServer},ContainerService=__decorate([n.Injectable(),__metadata("design:paramtypes",[a.AppConfig,o.Http])],ContainerService)}();e.ContainerService=s},0:function(t,e,r){"use strict";function main(t){var e=[s.AppConfig,u.ToastyService,u.ToastyConfig];return n.bootstrap(a.AppComponent,i.ENV_PROVIDERS.concat(o.PROVIDERS,o.DIRECTIVES,o.PIPES,e)).catch(function(t){return console.error(t)})}var n=r(365),o=r(566),i=r(571),a=r(561),s=r(120),u=r(118);e.main=main;document.addEventListener("DOMContentLoaded",function(){return main()})},565:function(t,e,r){"use strict";var n=r(3),o=r(82),i=r(569);e.APPLICATION_DIRECTIVES=o.ROUTER_DIRECTIVES.concat([i.RouterActiveDirective]),e.DIRECTIVES=[n.provide(n.PLATFORM_DIRECTIVES,{useValue:e.APPLICATION_DIRECTIVES,multi:!0})]},566:function(t,e,r){"use strict";function __export(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}__export(r(565)),__export(r(567)),__export(r(568))},567:function(t,e,r){"use strict";var n=r(3);e.APPLICATION_PIPES=[],e.PIPES=[n.provide(n.PLATFORM_PIPES,{useValue:e.APPLICATION_PIPES,multi:!0})]},568:function(t,e,r){"use strict";var n=r(39),o=r(150),i=r(876);e.APPLICATION_PROVIDERS=n.FORM_PROVIDERS.concat(o.HTTP_PROVIDERS,i.ROUTER_PROVIDERS,[{provide:n.LocationStrategy,useClass:n.HashLocationStrategy}]),e.PROVIDERS=e.APPLICATION_PROVIDERS.slice()},569:function(t,e,r){"use strict";function __export(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}__export(r(570))},570:function(t,e,r){"use strict";var n=r(82),o=r(6),i=r(3),a=r(82),s=function(){function RouterActiveDirective(t,e,r,n,o){this.router=t,this.element=e,this.renderer=r,this.routerLink=n,this.routerActive=void 0,this.routerActiveAttr="active",this.routerActiveAttr=this._defaultAttrValue(o)}return RouterActiveDirective.prototype.ngOnInit=function(){var t=this;this.routerLink.changes.subscribe(function(){t.routerLink.first&&(t._updateClass(),t._findRootRouter().subscribe(function(){t._updateClass()}))})},RouterActiveDirective.prototype._findRootRouter=function(){for(var t=this.router;o.isPresent(t.parent);)t=t.parent;return t},RouterActiveDirective.prototype._updateClass=function(){var t=this.routerLink.first.isRouteActive;this.renderer.setElementClass(this.element.nativeElement,this._attrOrProp(),t)},RouterActiveDirective.prototype._defaultAttrValue=function(t){return this.routerActiveAttr=t||this.routerActiveAttr},RouterActiveDirective.prototype._attrOrProp=function(){return o.isPresent(this.routerActive)?this.routerActive:this.routerActiveAttr},__decorate([i.Input(),__metadata("design:type",String)],RouterActiveDirective.prototype,"routerActive",void 0),RouterActiveDirective=__decorate([i.Directive({selector:"[lxdRouterActive]"}),__param(3,i.Query(a.RouterLink)),__param(4,i.Optional()),__param(4,i.Input()),__metadata("design:paramtypes",[n.Router,i.ElementRef,i.Renderer,i.QueryList,String])],RouterActiveDirective)}();e.RouterActiveDirective=s},571:function(t,e,r){"use strict";var n=r(3),o=[];n.enableProdMode(),o=o.slice(),e.ENV_PROVIDERS=o.slice()}});